<!DOCTYPE html>
<html>
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>

    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script type='text/javascript' src='https://s3.amazonaws.com/mturk-public/externalHIT_v1.js'></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

    <style>
        img {
            max-width: 100%;
            max-height: 100%;
        }

        .my-container {
            padding: 2em;
        }

        .response-box {
            margin-left: 1em;
            margin-right: 1em;
            margin-top: 2em;
            padding: 1em;
            border: 3px solid dodgerblue;
            border-radius: 5px;
        }

        .checkboxes {
            justify-content: center;
        }

        .my-checkbox {
            display: flex;
            align-items: center;
            flex-flow: column wrap;
        }

        /* HIDE RADIO */
        [type=radio] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        /* IMAGE STYLES */
        [type=radio] + img {
            cursor: pointer;
        }

        /* CHECKED STYLES */
        [type=radio]:checked + img {
            outline: 5px solid dodgerblue;
            -moz-outline-radius: 5px;
        }

        .question-container {
            border: 1px solid lightskyblue;
            border-radius: 10px;
            padding: 2em;
            margin-bottom: 1em;
        }

        .image-comparison {
        }
    </style>
</head>

<body>
<!--  <form name='mturk_form' method='post' id='mturk_form' action='https://www.mturk.com/mturk/externalSubmit'>-->
<!--  <input type='hidden' value='' name='assignmentId' id='assignmentId'/>-->
<!--  <h1>This is a test question</h1>-->
<!--  <p><textarea name='comment' cols='80' rows='3'></textarea></p>-->
<!--  <p><input type='submit' id='submitButton' value='Submit' /></p></form>-->
<!--  <script language='Javascript'>turkSetAssignmentID();</script>-->
<div class="my-container" id="app">
    <div class="">

        <div class="question-container" v-for="comparison in comparisons">

            <h2>Comparison {{comparison.index}}</h2>
            <div class="mt-2 mb-2">
                <span>Which plot is better?</span>

            </div>

            <div class="image-comparison row">
                <label class="col-6 align-self-center" @click="select_comparison(comparison, 'left')">
                    <input type="radio" :name="comparison.index" value="small">
                    <img src="0.jpeg">
                </label>
                <label class="col-6 align-self-center" @click="select_comparison(comparison, 'right')">
                    <input type="radio" :name="comparison.index" value="small">
                    <img src="1.jpeg">
                </label>
            </div>

            <div class="mt-2 mb-2">
                <span class="mt-2 mb-2">What did you consider when making this decision?</span>
            </div>
            <div class="response-box">
                <div class="category-names row text-center">
                    <span class="col-2"></span>
                    <span class="col">Legend</span>
                    <span class="col">Colour</span>
                    <span class="col">Axes</span>
                    <span class="col">Element sizes</span>
                    <span class="col">Transparency</span>
                </div>

                <div class="checkboxes row text-center mt-2">
                    <span class="col-2">Left plot</span>
                    <div class="form-check col-2 my-checkbox">
                        <input class="form-check-input text-center" type="checkbox"
                               v-model="comparison.data.checkboxes.first.legend" id="left_legend"
                               @click="comparison.data.checkboxes.second.legend = false">
                    </div>
                    <div class="form-check col my-checkbox">
                        <input class="form-check-input" type="checkbox"
                               v-model="comparison.data.checkboxes.first.colour" id="left_colour"
                               @click="comparison.data.checkboxes.second.colour = false">
                    </div>
                    <div class="form-check col my-checkbox">
                        <input class="form-check-input" type="checkbox" v-model="comparison.data.checkboxes.first.axes"
                               id="left_axes" @click="comparison.data.checkboxes.second.axes = false">
                    </div>
                    <div class="form-check col my-checkbox">
                        <input class="form-check-input" type="checkbox"
                               v-model="comparison.data.checkboxes.first.element_sizes" id="left_element_sizes"
                               @click="comparison.data.checkboxes.second.element_sizes = false">
                    </div>
                    <div class="form-check col my-checkbox">
                        <input class="form-check-input" type="checkbox"
                               v-model="comparison.data.checkboxes.first.transparency" id="left_transparency"
                               @click="comparison.data.checkboxes.second.transparency = false">
                    </div>
                </div>

                <div class="checkboxes row text-center mt-2">
                    <span class="col-2">Right plot</span>
                    <div class="form-check col-2 my-checkbox">
                        <input class="form-check-input text-center" type="checkbox"
                               v-model="comparison.data.checkboxes.second.legend" id="right_legend"
                               @click="comparison.data.checkboxes.first.legend = false">
                    </div>
                    <div class="form-check col my-checkbox">
                        <input class="form-check-input" type="checkbox"
                               v-model="comparison.data.checkboxes.second.colour" id="right_colour"
                               @click="comparison.data.checkboxes.first.colour = false">
                    </div>
                    <div class="form-check col my-checkbox">
                        <input class="form-check-input" type="checkbox" v-model="comparison.data.checkboxes.second.axes"
                               id="right_axes"
                               @click="comparison.data.checkboxes.first.axes = false">
                    </div>
                    <div class="form-check col my-checkbox">
                        <input class="form-check-input" type="checkbox"
                               v-model="comparison.data.checkboxes.second.element_sizes" id="right_element_sizes"
                               @click="comparison.data.checkboxes.first.element_sizes = false">
                    </div>
                    <div class="form-check col my-checkbox">
                        <input class="form-check-input" type="checkbox"
                               v-model="comparison.data.checkboxes.second.transparency" id="right_transparency"
                               @click="comparison.data.checkboxes.first.transparency = false">
                    </div>
                </div>
            </div>
        </div>

        <button @click="validate()">Validate</button>
    </div>
</div>
<script>
    <!--    TODO: Validation, data fetching, data sending-->
    var app = new Vue({
            el: '#app',
            data: function () {
                return {
                    message: 'Hello Vue!',
                    comparisons: [...Array(2).keys()].map(function (key) {
                        return {
                            index: key,
                            data: {
                                selected_plot: null,
                                checkboxes: {
                                    first: {
                                        legend: false,
                                        colour: false,
                                        axes: false,
                                        element_sizes: false,
                                        transparency: false
                                    },
                                    second: {
                                        legend: false,
                                        colour: false,
                                        axes: false,
                                        element_sizes: false,
                                        transparency: false
                                    }
                                }
                            },
                            validation: {
                                plot_selected: true,
                                decision_selected: true
                            }
                        }
                    })
                }
            },
            // watch: {
            //     "comparisons": {
            //         handler: function (new_val, old_val) {
            //             this.comparisons = new_val.map(function (comparison) {
            //                 checkboxes = comparison.data.checkboxes
            //                 print(checkboxes)
            //                 // keys = Object.keys()
            //                 // console.log(keys)
            //                 return comparison
            //             })
            //         },
            //         deep: true,
            //         immediate: true
            //     }
            // },
            methods: {
                validate() {
                    console.log(JSON.parse(JSON.stringify(this.comparisons)))
                },
                select_comparison(comparison, plot) {
                    comparison.data.selected_plot = plot
                }
            }
        }
    )
</script>
</body>
</html>